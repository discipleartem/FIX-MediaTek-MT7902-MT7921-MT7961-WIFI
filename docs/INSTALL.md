# üìñ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –ø–∞—Ç—á–∞ MT7921

## üéØ –û–±–∑–æ—Ä

–≠—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–∞—Ç—á–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ WiFi –∞–¥–∞–ø—Ç–µ—Ä–∞ MediaTek MT7921 (PCI ID: 0x7902) –≤ —è–¥—Ä–æ Linux.

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **–û–°:** Ubuntu 20.04+ / Debian 10+ / Linux Mint 20+
- **–Ø–¥—Ä–æ:** Linux 5.8+ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 5.15+)
- **–ü–∞–º—è—Ç—å:** –º–∏–Ω–∏–º—É–º 2GB RAM
- **–î–∏—Å–∫:** –º–∏–Ω–∏–º—É–º 5GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞

### –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã
```bash
sudo apt update
sudo apt install -y build-essential linux-headers-$(uname -r) git wget
```

## üîß –ú–µ—Ç–æ–¥—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏

### –ú–µ—Ç–æ–¥ 1: –ö–∞—Å—Ç–æ–º–Ω—ã–π ISO (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- WiFi —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞

**–®–∞–≥–∏:**
1. **–°–æ–∑–¥–∞–π—Ç–µ –∫–∞—Å—Ç–æ–º–Ω—ã–π –æ–±—Ä–∞–∑:**
   ```bash
   sudo ./BUILD_PATCHED_ISO.sh
   ```

2. **–ó–∞–ø–∏—à–∏—Ç–µ –æ–±—Ä–∞–∑ –Ω–∞ —Ñ–ª–µ—à–∫—É:**
   ```bash
   # –î–ª—è Ubuntu/Debian
   sudo dd if=ubuntu-22.04.3-mt7921-patched.iso of=/dev/sdX bs=4M status=progress
   
   # –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Rufus (Windows) / Etcher (macOS)
   ```

3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É:**
   - –ó–∞–≥—Ä—É–∑–∏—Ç–µ—Å—å —Å —Ñ–ª–µ—à–∫–∏
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Ubuntu –∫–∞–∫ –æ–±—ã—á–Ω–æ
   - WiFi –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –ú–µ—Ç–æ–¥ 2: –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞—Ç—á–∞

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ù–µ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É
- –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
- –û–±–Ω–æ–≤–ª—è–µ–º–æ–µ —Ä–µ—à–µ–Ω–∏–µ

**–®–∞–≥–∏:**

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é —è–¥—Ä–∞:**
   ```bash
   uname -r
   # –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤–µ—Ä—Å–∏—è >= 5.8
   ```

2. **–°–∫–∞—á–∞–π—Ç–µ –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ —è–¥—Ä–∞:**
   ```bash
   # Ubuntu/Debian
   apt source linux-image-$(uname -r)
   cd linux-*
   
   # –ò–ª–∏ —Å–∫–∞—á–∞–π—Ç–µ —Å kernel.org
   wget https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.15.0.tar.xz
   tar -xf linux-5.15.0.tar.xz
   cd linux-5.15.0
   ```

3. **–ü—Ä–∏–º–µ–Ω–∏—Ç–µ –ø–∞—Ç—á:**
   ```bash
   # –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–∞—Ç—á –≤ –ø–∞–ø–∫—É —Å –∏—Å—Ö–æ–¥–Ω–∏–∫–∞–º–∏
   cp ../patches/mt7921_add_7902.patch .
   
   # –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –ø–∞—Ç—á
   patch -p1 < mt7921_add_7902.patch
   ```

4. **–°–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–π—Ç–µ —è–¥—Ä–æ:**
   ```bash
   # –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
   cp /boot/config-$(uname -r) .config
   
   # –ù–∞—Å—Ç—Ä–æ–π—Ç–µ
   make oldconfig
   ```

5. **–°–æ–±–µ—Ä–∏—Ç–µ –º–æ–¥—É–ª—å:**
   ```bash
   # –¢–æ–ª—å–∫–æ –º–æ–¥—É–ª—å mt7921
   make M=drivers/net/wireless/mediatek/mt76/mt7921 modules
   
   # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –º–æ–¥—É–ª—å
   sudo make M=drivers/net/wireless/mediatek/mt76/mt7921 modules_install
   sudo depmod -a
   ```

6. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É:**
   ```bash
   sudo reboot
   ```

### –ú–µ—Ç–æ–¥ 3: –ë—ã—Å—Ç—Ä—ã–π –ø–∞—Ç—á (–¢–æ–ª—å–∫–æ –¥–ª—è –æ–ø—ã—Ç–Ω—ã—Ö)

**–í–Ω–∏–º–∞–Ω–∏–µ:** –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ —è–¥—Ä–∞ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã.

```bash
#!/bin/bash
# –ë—ã—Å—Ç—Ä—ã–π –ø–∞—Ç—á mt7921

# –ù–∞–π–¥–∏—Ç–µ —Ñ–∞–π–ª pci.c
PCI_FILE=$(find /usr/src -name "pci.c" -path "*/mt7921/*" 2>/dev/null | head -1)

if [ -n "$PCI_FILE" ]; then
    echo "–ù–∞–π–¥–µ–Ω —Ñ–∞–π–ª: $PCI_FILE"
    
    # –°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é
    sudo cp "$PCI_FILE" "$PCI_FILE.backup"
    
    # –î–æ–±–∞–≤—å—Ç–µ PCI ID 0x7902
    sudo sed -i '/{ PCI_DEVICE(PCI_VENDOR_ID_MEDIATEK, 0x7922),/a\
	{ PCI_DEVICE(PCI_VENDOR_ID_MEDIATEK, 0x7902),\
		.driver_data = (kernel_ulong_t)MT7921_FIRMWARE_WM },' "$PCI_FILE"
    
    # –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –º–æ–¥—É–ª—å
    cd /usr/src/linux-headers-$(uname -r)/
    sudo make M=drivers/net/wireless/mediatek/mt76/mt7921 modules
    sudo make M=drivers/net/wireless/mediatek/mt76/mt7921 modules_install
    sudo depmod -a
    
    echo "‚úÖ –ü–∞—Ç—á –ø—Ä–∏–º–µ–Ω–µ–Ω! –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É."
else
    echo "‚ùå –§–∞–π–ª pci.c –Ω–µ –Ω–∞–π–¥–µ–Ω"
fi
```

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:**
   ```bash
   lspci -nn | grep -i mediatek
   # –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: MEDIATEK Device 7902
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É –º–æ–¥—É–ª—è:**
   ```bash
   lsmod | grep mt7921
   # –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω –º–æ–¥—É–ª—å mt7921
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å WiFi:**
   ```bash
   ip link show
   # –î–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å wlan0 –∏–ª–∏ similar
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É WiFi:**
   ```bash
   nmcli dev wifi list
   # –ò–ª–∏
   iwlist scan
   ```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

**–í–∞–∂–Ω–æ:** –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —è–¥—Ä–∞ –ø–∞—Ç—á –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω.

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ç—á–∞

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `/etc/kernel/postinst.d/mt7921-patch`:

```bash
#!/bin/bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ç—á mt7921 –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —è–¥—Ä–∞

KERNEL_VERSION=$1
PCI_FILE="/usr/src/linux-headers-$KERNEL_VERSION/drivers/net/wireless/mediatek/mt76/mt7921/pci.c"

if [ -f "$PCI_FILE" ]; then
    if ! grep -q "0x7902" "$PCI_FILE"; then
        echo "–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ç—á–∞ MT7921 –¥–ª—è —è–¥—Ä–∞ $KERNEL_VERSION"
        sed -i '/{ PCI_DEVICE(PCI_VENDOR_ID_MEDIATEK, 0x7922),/a\
	{ PCI_DEVICE(PCI_VENDOR_ID_MEDIATEK, 0x7902),\
		.driver_data = (kernel_ulong_t)MT7921_FIRMWARE_WM },' "$PCI_FILE"
        
        # –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –º–æ–¥—É–ª—å
        cd "/usr/src/linux-headers-$KERNEL_VERSION/"
        make M=drivers/net/wireless/mediatek/mt76/mt7921 modules
        make M=drivers/net/wireless/mediatek/mt76/mt7921 modules_install
        depmod -a
    fi
fi
```

–°–¥–µ–ª–∞–π—Ç–µ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º:
```bash
sudo chmod +x /etc/kernel/postinst.d/mt7921-patch
```

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

–°–º. [TROUBLESHOOTING.md](TROUBLESHOOTING.md) –¥–ª—è —Ä–µ—à–µ–Ω–∏—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º.

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–¥–µ–ª —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º
2. –°–æ–∑–¥–∞–π—Ç–µ Issue –Ω–∞ GitHub
3. –ü—Ä–∏–ª–æ–∂–∏—Ç–µ –≤—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥:
   ```bash
   uname -a
   lspci -nn | grep -i mediatek
   dmesg | grep mt7921
   lsmod | grep mt7921
   ```

---

**–í–µ—Ä—Å–∏—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:** 1.0.0  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2026-02-12
